{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Creates and configures a S3 bucket for storing static web files. Creates and configures a CloudFront distribution network to speed up content delivery. Creates or updates the Route53 records required as appropriate.",
  "Resources" : {
    "FoxCorporationsS3FrontEnd" : {
      "Type" : "AWS::S3::Bucket",
	  "Properties" : {
         "AccessControl" : "PublicRead",
         "WebsiteConfiguration" : {
            "IndexDocument" : "index.html"
         }
      }
	},
    "FoxCorporationsCloudFront" : {
      "Type" : "AWS::CloudFront::Distribution",
      "Properties" : {
        "DistributionConfig" : {
          "Origins" : [ {
            "DomainName": {"Fn::GetAtt" : ["FoxCorporationsS3FrontEnd", "DomainName"]},
            "Id" : "FoxCorporationsS3FrontEnd",
            "S3OriginConfig" : { }
          } ],
          "Enabled" : "true",
          "DefaultCacheBehavior" : {
		    "AllowedMethods" : ["HEAD", "GET"],
            "TargetOriginId" : "FoxCorporationsS3FrontEnd",
            "ForwardedValues" : {
              "QueryString" : "false"
            },
            "ViewerProtocolPolicy" : "redirect-to-https"
          }
        }
      }
    }
  },
  "Outputs" : {
    "S3BucketID": {
      "Description": "ID of the S3 bucket.",
      "Value": {
        "Ref" : "FoxCorporationsS3FrontEnd"
      }
    },
    "S3DomainName": {
      "Description": "DNS name of the S3 bucket.",
      "Value": {
        "Fn::GetAtt": [
          "FoxCorporationsS3FrontEnd","DomainName"
        ]
      }
    },
    "CloudFrontID": {
      "Description": "ID of the CloudFront distribution.",
      "Value": {
        "Ref" : "FoxCorporationsCloudFront"
      }
    },
	"CloudFrontDomainName": {
      "Description": "DNS name of the CloudFront distribution.",
      "Value": {
        "Fn::GetAtt": [
          "FoxCorporationsCloudFront","DomainName"
        ]
      }
    }
  }
}
